<head>
  <title>{{request.user.username}}|Vendor</title>
  </head>
  <div class="col-span-12 mt-8">
  <!-- component -->
  <link rel="stylesheet" href="https://demos.creative-tim.com/notus-js/assets/styles/tailwind.css">
  <link rel="stylesheet" href="https://demos.creative-tim.com/notus-js/assets/vendor/@fortawesome/fontawesome-free/css/all.min.css">
  <div class="col-span-12 mt-8">
    <header class="bg-green-500 p-4 rounded-full">
      <div class="container mx-auto flex justify-between items-center">
          <div class="text-white text-xl font-bold">
            <i class="fas fa-industry"></i>  Enter Daily Production Detail
          </div>
          
      </div>
  </header>
    <div id="loader-overlay">
        <div class="loader"></div>
    </div>
  <section class=" py-1 ">
    <div class="w-full lg:w-9/10 px-4 mx-auto mt-6">
      <div class="relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded-lg border-0">
        <div class="rounded-t bg-white mb-0 px-4 py-6">
          <!-- Title -->
          <h6 class="text-blueGray-600 text-sm mt-3 mb-6 font-bold uppercase">Production Information</h6>
        </div>
        <div class="flex-auto px-4 lg:px-6 py-6 pt-0">
          <form action="{% url 'AddDailyProduction' %}" method="post" id="AddDailyProduction" enctype="multipart/form-data">
              {% csrf_token %}
              
              <!-- Production Information Section -->
              <div class="flex flex-wrap mb-6">
                  <div class="w-full lg:w-6/12 px-2">
                      <div class="relative w-full mb-3">
                          <label class="block uppercase text-black text-xs font-bold mb-2" for="Production_Product_Name">
                              <i class="fas fa-cog"></i> Production Product Name <b class="text-red-500">*</b>
                          </label>
                          <select name="Production_Product_Name" id="Production_Product_Name" class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150" required>
                              {% for Products in Products %}
                              <option value="{{Products.Manufacturing_Product_Name}}">{{Products.Manufacturing_Product_Name}}</option>
                              {% endfor %}
                          </select>
                      </div>
                  </div>
                  <div class="w-full lg:w-6/12 px-2">
                      <div class="relative w-full mb-3">
                          <label class="block uppercase text-black text-xs font-bold mb-2" for="Production_Place">
                              <i class="fas fa-map-marker-alt"></i> Production Place <b class="text-red-500">*</b>
                          </label>
                          <input type="text" name="Production_Place" class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150" required placeholder="Production Place">
                      </div>
                  </div>
                  <div class="w-full lg:w-6/12 px-2">
                      <div class="relative w-full mb-3">
                          <label class="block uppercase text-black text-xs font-bold mb-2" for="City">
                              <i class="fas fa-city"></i> City <b class="text-red-500">*</b>
                          </label>
                          <input type="text" name="City" class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150" required placeholder="City">
                      </div>
                  </div>
                  <div class="w-full lg:w-6/12 px-2">
                      <div class="relative w-full mb-3">
                          <label class="block uppercase text-black text-xs font-bold mb-2" for="Total_Production_Item">
                              <i class="fas fa-box"></i> Total Production Item (BALES) <b class="text-red-500">*</b>
                          </label>
                          <input type="number" name="Total_Production_Item" id="Total_Production_Item" class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150" required placeholder="Total Production Item">
                      </div>
                  </div>
                  <div class="w-full lg:w-6/12 px-2">
                      <div class="relative w-full mb-3">
                          <label class="block uppercase text-black text-xs font-bold mb-2" for="Bale_Production_Price">
                              <i class="fas fa-dollar-sign"></i> Bale Production Price <b class="text-red-500">*</b>
                          </label>
                          <input type="number" name="Bale_Production_Price" id="Bale_Production_Price" class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150" required placeholder="Bale Production Price">
                      </div>
                  </div>
                  <div class="w-full lg:w-6/12 px-2">
                      <div class="relative w-full mb-3">
                          <label class="block uppercase text-black text-xs font-bold mb-2" for="Total_Amount">
                              <i class="fas fa-dollar-sign"></i> Total Amount <b class="text-red-500">*</b>
                          </label>
                          <input type="text" name="Total_Amount" id="Total_Amount" class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150" readonly placeholder="Total Amount">
                      </div>
                  </div>
              </div>
              <hr class="mt-6 border-b-1 border-black">
              <div class="rounded-t bg-white mb-0 px-4 py-6">
                  <!-- Title -->
                  <h6 class="text-blueGray-600 text-sm mt-3 mb-6 font-bold uppercase">Production Team & Expenses</h6>
              </div>
              <!-- Production Team Information Section -->
              <div class="flex flex-wrap mb-6">
                  <div class="w-full lg:w-6/12 px-2">
                      <div class="relative w-full mb-3">
                          <label class="block uppercase text-black text-xs font-bold mb-2" for="Production_Team_Name">
                              <i class="fas fa-users"></i> Production Team Name <b class="text-red-500">*</b>
                          </label>
                          <select name="team"   class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150" required>
                            {% for   production_labour in labour %}
                    <option value="{{production_labour.id}}">{{production_labour.Team_Leader}}</option>
                    {% endfor %}
                        </select> </div>
                  </div>
                  
                  <div class="w-full lg:w-6/12 px-2">
                      <div class="relative w-full mb-3">
                          <label class="block uppercase text-black text-xs font-bold mb-2" for="Remarks_of_Expense">
                              <i class="fas fa-comment-alt"></i> Production Expense Remark <b class="text-red-500">*</b>
                          </label>
                          <textarea name="Remarks_of_Expense" rows="1" id="Remarks_of_Expense" class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150" required placeholder="Production Expense Remark"></textarea>
                      </div>
                  </div>
                  <div class="w-full lg:w-6/12 px-2">
                    <div class="relative w-full mb-3">
                      <label class="block uppercase text-black text-xs font-bold mb-2" for="Settlement">
                        <i class="fas fa-check-circle"></i> Production Completed? <b class="text-red-500">*</b>
                      </label>
                      <select name="Settlement" id="Settlement" class="border-0 px-3 py-3 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150" required style="width: 800px;"  >
                        <option value="incomplete">Incomplete</option>
                        <option value="complete">Complete</option>
                      </select>
                    </div>
                  </div>
                </div>
                
                  <div class="w-full lg:w-6/12 px-2">
                      <div class="relative w-full mb-3">
                          <label class="block uppercase text-black text-xs font-bold mb-2" for="Settlement">
                              <i class="fas fa-money-check-alt"></i>Payment Status <b class="text-red-500">*</b>

                          </label>
                          <div class="flex items-center">
                              <input type="radio" name="Payment_Status" id="credit" value="PAID" class="mr-2">
                              <label for="credit" class="mr-4">Paid</label>
                              <input type="radio" name="Payment_Status" id="paid" value="CREDIT" class="mr-2">
                              <label for="paid">Credit</label>
                          </div>
                      </div>
                  </div>
                  
              </div>
              <div id="paid-info" style="display: none;">
                <!-- Paid Amount -->
                <div class="flex flex-wrap mb-6">
                    <div class="w-full lg:w-6/12 px-2">
                        <div class="relative w-full mb-3">
                            <label class="block uppercase text-black text-xs font-bold mb-2" for="Paid_Amount">
                                <i class="fas fa-credit-card"></i> Paid Amount
                            </label>
                            <input type="number" name="Paid_Amount" id="Paid_Amount" class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150" placeholder="Paid Amount">
                        </div>
                    </div>
                    <div class="w-full lg:w-6/12 px-2">
                        <div class="relative w-full mb-3">
                            <label class="block uppercase text-black text-xs font-bold mb-2" for="Remaining">
                                <i class="fas fa-calculator"></i> Remaining Amount
                            </label>
                            <input type="text" name="Remaining" id="Remaining" class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150" readonly placeholder="Remaining Amount">
                        </div>
                    </div>
                </div>
            </div>
              <hr class="mt-6 border-b-1 border-black">
              <!-- Submit Button -->
              <div class="text-center mt-6">
               <button type="submit" id="submit-button" class="w-full bg-green-500 text-white py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                                    <i class="fas fa-plus"></i> Add Daily Production
                                </button>
              
                    </div>
          </form>
      </div>
  
      <script>
          document.addEventListener('DOMContentLoaded', function() {
              const totalItemInput = document.getElementById('Total_Production_Item');
              const balePriceInput = document.getElementById('Bale_Production_Price');
              const totalAmountInput = document.getElementById('Total_Amount');
              const paymentStatusRadios = document.querySelectorAll('input[name="Payment_Status"]');
              const paidAmountInput = document.getElementById('Paid_Amount');
              const remainingInput = document.getElementById('Remaining');
              const paidInfoDiv = document.getElementById('paid-info');
  
              function calculateTotalAmount() {
                  const totalItem = parseFloat(totalItemInput.value) || 0;
                  const balePrice = parseFloat(balePriceInput.value) || 0;
                  const totalAmount = totalItem * balePrice;
                  totalAmountInput.value = totalAmount.toFixed(2);
                  calculateRemaining(); // Update remaining amount when total amount changes
              }
  
              function handlePaymentStatusChange() {
                  if (document.getElementById('credit').checked) {
                      paidInfoDiv.style.display = 'none';
                  } else if (document.getElementById('paid').checked) {
                      paidInfoDiv.style.display = 'block';
                  }
              }
  
              function calculateRemaining() {
                  if (document.getElementById('paid').checked) {
                      const totalAmount = parseFloat(totalAmountInput.value) || 0;
                      const paidAmount = parseFloat(paidAmountInput.value) || 0;
                      const remainingAmount = totalAmount - paidAmount;
                      remainingInput.value = remainingAmount.toFixed(2);
                  }
              }
  
              totalItemInput.addEventListener('input', calculateTotalAmount);
              balePriceInput.addEventListener('input', calculateTotalAmount);
  
              paymentStatusRadios.forEach(radio => {
                  radio.addEventListener('change', handlePaymentStatusChange);
              });
  
              paidAmountInput.addEventListener('input', calculateRemaining);
          });
      </script>
      </div>
    </div>
    
  </section>
  
    
  </div>
 
  
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  <script>
  function data() {
  
  return {
  
  isSideMenuOpen: false,
  toggleSideMenu() {
  this.isSideMenuOpen = !this.isSideMenuOpen
  },
  closeSideMenu() {
  this.isSideMenuOpen = false
  },
  isNotificationsMenuOpen: false,
  toggleNotificationsMenu() {
  this.isNotificationsMenuOpen = !this.isNotificationsMenuOpen
  },
  closeNotificationsMenu() {
  this.isNotificationsMenuOpen = false
  },
  isProfileMenuOpen: false,
  toggleProfileMenu() {
  this.isProfileMenuOpen = !this.isProfileMenuOpen
  },
  closeProfileMenu() {
  this.isProfileMenuOpen = false
  },
  isPagesMenuOpen: false,
  togglePagesMenu() {
  this.isPagesMenuOpen = !this.isPagesMenuOpen
  },
  
  }
  }
  </script>
   
  <script>
    document.addEventListener('htmx:afterOnLoad', function(evt) {
        if (evt.detail.target.id === 'product-exists-message') {
            const response = JSON.parse(evt.detail.xhr.responseText);
            const submitButton = document.getElementById('submit-button');
            if (response.exists) {
                submitButton.style.display = 'none';
                document.getElementById('product-exists-message').innerText = 'Product name already exists.';
            } else {
                submitButton.style.display = 'block';
                document.getElementById('product-exists-message').innerText = '';
            }
        }
    });
  </script>
  <script>
    document.getElementById('AddDailyProduction').addEventListener('submit', function() {
        document.getElementById('loader-overlay').style.display = 'flex';
    });
  
    window.addEventListener('load', function() {
        document.getElementById('loader-overlay').style.display = 'none';
    });
  </script>
  <script>
    // Function to update file name display
    document.getElementById('Production_and_Expense_Proof_Screenshot').addEventListener('change', function() {
        var input = this;
        var fileName = input.files[0].name;
        document.getElementById('file-name').textContent = fileName;
    });
    </script>
  
  
  
  