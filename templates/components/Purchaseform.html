<head>
    <title>{{request.user.username}}|Vendor</title>
    <style>
      .hidden-section {
        display: none;
    }
    </style>
    </head>
    <div class="col-span-12 mt-8">
      
    <!-- component -->
    <link rel="stylesheet" href="https://demos.creative-tim.com/notus-js/assets/styles/tailwind.css">
    <link rel="stylesheet" href="https://demos.creative-tim.com/notus-js/assets/vendor/@fortawesome/fontawesome-free/css/all.min.css">
    <div class="col-span-12 mt-8">
      <header class="bg-green-500 p-4 rounded-full">
        <div class="container mx-auto flex justify-between items-center">
            <div class="text-white text-xl font-bold">
              <i class="fas fa-industry"></i>  Enter Daily Production Detail
            </div>
            
        </div>
    </header>
      <div id="loader-overlay">
          <div class="loader"></div>
      </div>
    <section class=" py-1 ">
      <div class="w-full lg:w-9/10 px-4 mx-auto mt-6">
        <div class="relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded-lg border-0">
          <div class="rounded-t bg-white mb-0 px-4 py-6">
            <!-- Title -->
            <h6 class="text-blueGray-600 text-sm mt-3 mb-6 font-bold uppercase">Production Information</h6>
          </div>
          <div class="flex-auto px-4 lg:px-6 py-6 pt-0">
            <form action="{% url 'AddManufecturePurchase' %}" method="post" id="AddManufecturePurchase" enctype="multipart/form-data">
              {% csrf_token %}
              
              <!-- Production Information Section -->
              <div class="flex flex-wrap mb-6">
                <div class="w-full lg:w-6/12 px-2">
                  <div class="relative w-full mb-3">
                    <label class="block uppercase text-black text-xs font-bold mb-2" for="Production_Product_Name">
                      <i class="fas fa-cog"></i> SELECT PURCHASE TYPE <b class="text-red-500">*</b>
                    </label>
                    <select name="Purchase_Type" id="type-select"  class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150" required>
                        <option value="PER ACER" selected disabled>SELECT PURCHASE TYPE </option>
                    <option value="PER_ACER">PER ACER</option>
                    <option value="PURCHASE_WEIGHT">PURCHASE WEIGHT</option>
                    
                    </select>
                  </div>
                </div>
                <div class="w-full lg:w-6/12 px-2">
                  <div class="relative w-full mb-3">
                    <label class="block uppercase text-black text-xs font-bold mb-2" for="Production_Place">
                      <i class="fas fa-map-marker-alt"></i> Production Place <b class="text-red-500">*</b>
                    </label>
                    <input type="text" name="Production_Place" class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150" required placeholder="Production Place">
                  </div>
                </div>
                <div class="w-full lg:w-6/12 px-2">
                  <div class="relative w-full mb-3">
                    <label class="block uppercase text-black text-xs font-bold mb-2" for="City">
                        <i class="fas fa-users"></i> Supplier Name <b class="text-red-500">*</b>
                    </label>
                    <input type="text" name="sname" class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150" required placeholder="City">
                  </div>
                </div>
                <div class="w-full lg:w-6/12 px-2">
                  <div class="relative w-full mb-3">
                    <label class="block uppercase text-black text-xs font-bold mb-2" for="Total_Production_Item">
                      <i class="fas fa-box"></i> Bunkar Name <b class="text-red-500">*</b>
                    </label>
                    <input type="text" name="Product_Name" class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150" required placeholder="Bunkar"  hx-post="{% url 'check_product_name' %}" hx-trigger="change" hx-target="#validation1" hx-swap="innerHTML">
                    
                  </div>
                  <div id="validation1" style="color: red;"></div>
                </div>
              </div>
              <hr class="mt-6 border-b-1 border-black">
              <div class="rounded-t bg-white mb-0 px-4 py-6">
                <!-- Title -->
                
              </div>
              <!-- Production Team Information Section -->
              <div id="per-acer-fields" style="display: none;">
                 
                <div class="flex flex-wrap mb-6">
                  <div class="w-full lg:w-6/12 px-2">
                    <div class="relative w-full mb-3">
                      <label class="block uppercase text-black text-xs font-bold mb-2" for="total-acer">
                        <i class="fas fa-calculator"></i> Total Acer
                      </label>
                      <input type="number" id="total-acer" name="total_acer" class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150" placeholder="Total Acer">
                    </div>
                  </div>
                  <div class="w-full lg:w-6/12 px-2">
                    <div class="relative w-full mb-3">
                      <label class="block uppercase text-black text-xs font-bold mb-2" for="acer-purchase-price">
                        <i class="fas fa-dollar-sign"></i>  Acer Purchase Price
                      </label>
                      <input type="number" id="acer-purchase-price" name="acer_purchase_price" class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150" placeholder="Acer Purchase Price">
                    </div>
                  </div>
                </div>
                <div class="w-full lg:w-2/12 px-2">
                  <div class="relative w-full mb-3">
                    <label class="block uppercase text-black text-xs font-bold mb-2" for="total-amount">
                      <i class="fas fa-coins"></i> Total Amount
                    </label>
                    <input type="number" id="total-amount" step="0.2"  name="total_amount_acers" class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150" placeholder="Total Amount" readonly style="width: 800px;">
                  
                          </div>
              </div>
          </div>
          
 
           
            <div id="purchase-weight-fields" class="flex flex-wrap mb-6" style="display: none;">
                 
                  
                <div class="w-full lg:w-4/12 px-2">
                    <div class="relative w-full mb-3">
                        <label class="block uppercase text-black text-xs font-bold mb-2" for="Total_Weight">
                            <i class="fas fa-weight"></i> Total Weight
                        </label>
                        <input type="number" step="0.2" name="Total_Weight" id="Total_Weight" placeholder="Total Weight" class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150">
                    </div>
                </div>
                <div class="w-full lg:w-4/12 px-2">
                    <div class="relative w-full mb-3">
                        <label class="block uppercase text-black text-xs font-bold mb-2" for="Purchase_Weight_Price">
                            <i class="fas fa-tag"></i>    Purchase Weight Price
                        </label>
                        <input type="number" step="0.2" name="Purchase_Weight_Price" placeholder="Weight Purchase Price" id="Purchase_Weight_Price" class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150">
                    </div>
                </div>
                <div class="w-full lg:w-2/12 px-2">
                    <div class="relative w-full mb-3">
                        <label class="block uppercase text-black text-xs font-bold mb-2" for="Total_Amount">
                            <i class="fas fa-coins"></i>  Total Amount
                        </label>
                        <input type="number" step="0.2"  name="Wtotal" id="Total_Amount" placeholder="Total" readonly  class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150" style="width:950px;" >
                   
                            </div>
                </div>
            </div>
          
          <div class="input-radio-group">
              <label  class="block uppercase text-black text-xs font-bold mb-2">Payment Method</label>
              <input type="radio" id="paid" name="paymentMethod" value="Paid" onclick="showPaymentFields()"> <i class="fas fa-check-circle"></i>
              <label  class="block uppercase text-black text-xs font-bold mb-2"> Paid</label>
              <input type="radio" id="credit" name="paymentMethod" value="Credit" onclick="showPaymentFields()"> <i class="fas fa-credit-card"></i>
              <label  class="block uppercase text-black text-xs font-bold mb-2">  Credit</label>
          </div>
      
          <!-- Paid Section -->
          <div id="payment-section" class="hidden-section">
              <p style="color: green;">The payment is marked as fully paid!</p>
          </div>
      
          <!-- Credit Section -->
          <div id="credit-section" class="hidden-section">
              <div class="input-group">
                  <label for="paidAmount" class="block uppercase text-black text-xs font-bold mb-2"> <i class="fas fa-money-bill-wave"></i>
                     Paid Amount  </label>
                  <input type="number" id="paidAmount" placeholder="Paid Amount" name="Paid_amount" oninput="calculateRemaining()" step="0.01"  class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150">
              </div>
      
              <div class="input-group">
                  <label for="remainingAmount" class="block uppercase text-black text-xs font-bold mb-2"> <i class="fas fa-money-bill-wave-alt"></i>
                     Remaining Amount  </label>
                  <input type="number" id="remainingAmount" placeholder=" Remaining Amount" readonly name="Remaining"  class="border-0 px-3 py-3 placeholder-black text-black bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150">
              </div>
          </div>
    
        </div>
        
              <!-- Submit Button -->
              <div class="flex justify-center">
                <button type="submit" id="submit-button" class="w-full bg-green-500 text-white py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                  <i class="fas fa-plus"></i> Add Manufacturing
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
      
    </section>
    
      
    </div>
   
    
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script>
    function data() {
    
    return {
    
    isSideMenuOpen: false,
    toggleSideMenu() {
    this.isSideMenuOpen = !this.isSideMenuOpen
    },
    closeSideMenu() {
    this.isSideMenuOpen = false
    },
    isNotificationsMenuOpen: false,
    toggleNotificationsMenu() {
    this.isNotificationsMenuOpen = !this.isNotificationsMenuOpen
    },
    closeNotificationsMenu() {
    this.isNotificationsMenuOpen = false
    },
    isProfileMenuOpen: false,
    toggleProfileMenu() {
    this.isProfileMenuOpen = !this.isProfileMenuOpen
    },
    closeProfileMenu() {
    this.isProfileMenuOpen = false
    },
    isPagesMenuOpen: false,
    togglePagesMenu() {
    this.isPagesMenuOpen = !this.isPagesMenuOpen
    },
    
    }
    }
    </script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
          // Form elements
          const typeSelect = document.getElementById('type-select');
          const perAcerFields = document.getElementById('per-acer-fields');
          const purchaseWeightFields = document.getElementById('purchase-weight-fields');
          const totalAcerInput = document.getElementById('total-acer');
          const acerPriceInput = document.getElementById('acer-purchase-price');
          const acerTotalAmount = document.getElementById('total-amount'); // For per acre
          const totalWeightInput = document.getElementById('Total_Weight');
          const purchaseWeightPriceInput = document.getElementById('Purchase_Weight_Price');
          const weightTotalAmount = document.getElementById('Total_Amount'); // For weight
          const paidAmountInput = document.getElementById('paidAmount');
          const remainingAmountInput = document.getElementById('remainingAmount');
          const paymentMethodRadios = document.querySelectorAll('input[name="paymentMethod"]');
          const paymentSection = document.getElementById('payment-section');
          const creditSection = document.getElementById('credit-section');
      
          // Initialize form
          function initializeForm() {
              perAcerFields.style.display = 'none';
              purchaseWeightFields.style.display = 'none';
              paymentSection.style.display = 'none';
              creditSection.style.display = 'none';
              acerTotalAmount.value = '';
              weightTotalAmount.value = '';
              paidAmountInput.value = '';
              remainingAmountInput.value = '';
              paymentMethodRadios.forEach(radio => radio.checked = false);
          }
      
          // Calculate total amount for weight purchase
          function calculateTotalWeightAmount() {
              const totalWeight = parseFloat(totalWeightInput.value) || 0;
              const weightPrice = parseFloat(purchaseWeightPriceInput.value) || 0;
              weightTotalAmount.value = (totalWeight * weightPrice).toFixed(2);
              updatePaymentFields();
          }
      
          // Calculate total amount for acre purchase
          function calculateTotalAcerAmount() {
              const totalAcer = parseFloat(totalAcerInput.value) || 0;
              const acerPrice = parseFloat(acerPriceInput.value) || 0;
              acerTotalAmount.value = (totalAcer * acerPrice).toFixed(2);
              updatePaymentFields();
          }
      
          // Get current total amount based on active purchase type
          function getCurrentTotalAmount() {
              if (typeSelect.value === 'PER_ACER') {
                  return parseFloat(acerTotalAmount.value) || 0;
              } else if (typeSelect.value === 'PURCHASE_WEIGHT') {
                  return parseFloat(weightTotalAmount.value) || 0;
              }
              return 0;
          }
      
          // Purchase type selection handler
          typeSelect.addEventListener('change', function() {
              if (this.value === 'PER_ACER') {
                  perAcerFields.style.display = 'block';
                  purchaseWeightFields.style.display = 'none';
                  // Clear weight fields
                  totalWeightInput.value = '';
                  purchaseWeightPriceInput.value = '';
                  weightTotalAmount.value = '';
              } else if (this.value === 'PURCHASE_WEIGHT') {
                  purchaseWeightFields.style.display = 'flex';
                  perAcerFields.style.display = 'none';
                  // Clear acre fields
                  totalAcerInput.value = '';
                  acerPriceInput.value = '';
                  acerTotalAmount.value = '';
              } else {
                  perAcerFields.style.display = 'none';
                  purchaseWeightFields.style.display = 'none';
              }
              resetPaymentFields();
          });
      
          // Show/hide payment fields based on payment method
          function showPaymentFields() {
              const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked');
              if (!paymentMethod) return;
              
              if (paymentMethod.value === 'Paid') {
                  paymentSection.style.display = 'block';
                  creditSection.style.display = 'none';
                  // Set paid amount = total amount when Paid is selected
                  paidAmountInput.value = getCurrentTotalAmount().toFixed(2);
                  remainingAmountInput.value = '0.00';
              } else if (paymentMethod.value === 'Credit') {
                  paymentSection.style.display = 'none';
                  creditSection.style.display = 'block';
                  // Reset paid amount when Credit is selected
                  paidAmountInput.value = '';
                  updateRemainingAmount();
              }
          }
      
          // Calculate remaining amount
          function updateRemainingAmount() {
              const totalAmount = getCurrentTotalAmount();
              const paidAmount = parseFloat(paidAmountInput.value) || 0;
              remainingAmountInput.value = (totalAmount - paidAmount).toFixed(2);
          }
      
          // Update payment fields when total amount changes
          function updatePaymentFields() {
              const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked');
              if (paymentMethod) {
                  if (paymentMethod.value === 'Paid') {
                      paidAmountInput.value = getCurrentTotalAmount().toFixed(2);
                      remainingAmountInput.value = '0.00';
                  } else if (paymentMethod.value === 'Credit') {
                      updateRemainingAmount();
                  }
              }
          }
      
          // Reset payment fields
          function resetPaymentFields() {
              paidAmountInput.value = '';
              remainingAmountInput.value = '';
              paymentMethodRadios.forEach(radio => radio.checked = false);
              paymentSection.style.display = 'none';
              creditSection.style.display = 'none';
          }
      
          // Event listeners for weight calculation
          totalWeightInput.addEventListener('input', calculateTotalWeightAmount);
          purchaseWeightPriceInput.addEventListener('input', calculateTotalWeightAmount);
      
          // Event listeners for acre calculation
          totalAcerInput.addEventListener('input', calculateTotalAcerAmount);
          acerPriceInput.addEventListener('input', calculateTotalAcerAmount);
      
          // Event listeners for payment method
          paymentMethodRadios.forEach(radio => {
              radio.addEventListener('change', showPaymentFields);
          });
      
          // Event listener for paid amount changes
          paidAmountInput.addEventListener('input', updateRemainingAmount);
      
          // Initialize on load
          initializeForm();
      });
      </script>